async function getApiKey() {
  let t = await fetch("https://secure-api-production.up.railway.app/get-key", {
    headers: { Authorization: "Bearer CGLsuriatIwpf3w" },
  });
  if (!t.ok) return null;
  let e = await t.json();
  return e.apiKey;
}
window.addEventListener("scroll", function () {
  let t = document.querySelector(".header");
  window.scrollY > 50
    ? t.classList.add("scrolled")
    : t.classList.remove("scrolled");
}),
  document.addEventListener("DOMContentLoaded", function () {
    document.getElementById("phone").addEventListener("input", function (t) {
      let e = t.target.value.replace(/\D/g, "");
      (e =
        e.length <= 10
          ? e.replace(/(\d{2})(\d{4})(\d{0,4})/, "($1) $2-$3")
          : e.replace(/(\d{2})(\d{5})(\d{0,4})/, "($1) $2-$3")),
        (t.target.value = e);
    });
  }),
  getApiKey().then((t) => {
    document
      .getElementById("contactForm")
      .addEventListener("submit", function (e) {
        e.preventDefault(),
          emailjs.init(t),
          emailjs
            .send("service_i640gka", "template_puaoag7", {
              name: document.getElementById("name").value,
              email: document.getElementById("email").value,
              phone: document.getElementById("phone").value,
              search: document.getElementById("search").value,
              confirm: document.getElementById("confirm").checked
                ? "Sim"
                : "N\xe3o",
            })
            .then(
              function (t) {
                document.getElementById("contactForm").reset(),
                  alert("E-mail enviado com sucesso!");
              },
              function (t) {
                alert("Erro ao enviar e-mail. Tente novamente mais tarde.");
              }
            );
      });
  });
const whatsappButton = document.getElementById("whatsapp-button"),
  tooltip = document.getElementById("whatsapp-tooltip");
let tooltipTimeout;
function showTooltip() {
  (tooltip.style.opacity = "1"), (tooltip.style.transform = "translateY(0)");
}
function hideTooltip() {
  (tooltip.style.opacity = "0"), (tooltip.style.transform = "translateY(10px)");
}
setTimeout(showTooltip, 1e3),
  (tooltipTimeout = setTimeout(hideTooltip, 3e4)),
  whatsappButton.addEventListener("mouseover", () => {
    clearTimeout(tooltipTimeout), showTooltip();
  }),
  whatsappButton.addEventListener("mouseleave", () => {
    tooltipTimeout = setTimeout(hideTooltip, 500);
  }),
  whatsappButton.addEventListener("click", () => {
    hideTooltip();
  }),
  document.querySelectorAll("nav a").forEach((t) => {
    t.addEventListener("click", function (t) {
      t.preventDefault();
      let e = this.getAttribute("href").substring(1),
        o = document.getElementById(e);
      o && o.scrollIntoView({ behavior: "smooth", block: "start" });
    });
  });
